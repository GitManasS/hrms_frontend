<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leave History</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="mb-4">Leave History</h2>
        <div id="leaveHistoryTable" class="table-responsive">
            <!-- Leave history table will be dynamically generated here -->
        </div>
    </div>

    <script>
        // Function to parse query parameters from URL
        function parseQueryParameters() {
            var queryParams = {};
            var queryString = window.location.search.substring(1);
            var pairs = queryString.split('&');
            for (var i = 0; i < pairs.length; i++) {
                var pair = pairs[i].split('=');
                queryParams[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
            }
            return queryParams;
        }

        // Function to generate HTML table for leave history
        function generateLeaveHistoryTable(leaveHistory) {
            var tableHTML = '<table class="table table-bordered"><thead><tr><th>Leave ID</th><th>Start Date</th><th>End Date</th><th>Leave Type</th><th>Status</th><th>Reason</th></tr></thead><tbody>';
            for (var i = 0; i < leaveHistory.length; i++) {
                tableHTML += '<tr><td>' + leaveHistory[i].LeaveID + '</td><td>' + leaveHistory[i].StartDate + '</td><td>' + leaveHistory[i].EndDate + '</td><td>' + leaveHistory[i].LeaveType + '</td><td>' + leaveHistory[i].Status + '</td><td>' + leaveHistory[i].Reason + '</td></tr>';
            }
            tableHTML += '</tbody></table>';
            return tableHTML;
        }

        // Parse query parameters and retrieve leave history data
        var queryParams = parseQueryParameters();
        var leaveHistory = JSON.parse(queryParams.leaveHistory);

        // Generate HTML table for leave history and append it to the leaveHistoryTable div
        document.getElementById('leaveHistoryTable').innerHTML = generateLeaveHistoryTable(leaveHistory);
    </script>
</body>
</html>
